<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airportinfo Data Server - Documentation</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; padding: 20px; background: #f5f5f5; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; margin-bottom: 10px; }
        h2 { color: #34495e; margin-top: 30px; margin-bottom: 15px; border-bottom: 2px solid #3498db; padding-bottom: 5px; }
        h3 { color: #555; margin-top: 20px; margin-bottom: 10px; }
        .endpoint { background: #ecf0f1; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .endpoint code { background: #34495e; color: #ecf0f1; padding: 2px 6px; border-radius: 3px; font-size: 0.9em; }
        .param { margin: 10px 0; }
        .param strong { color: #2980b9; }
        .example { background: #2c3e50; color: #ecf0f1; padding: 15px; border-radius: 5px; margin: 15px 0; overflow-x: auto; }
        .example code { color: #3498db; }
        .note { background: #fff3cd; border-left: 4px solid #ffc107; padding: 10px 15px; margin: 15px 0; }
        .success { background: #d4edda; border-left: 4px solid #28a745; padding: 10px 15px; margin: 15px 0; }
        ul { margin-left: 20px; margin-top: 10px; }
        li { margin: 5px 0; }
        a { color: #3498db; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚úàÔ∏è Airportinfo Data Server</h1>
        <p style="color: #7f8c8d; margin-bottom: 20px;">API pour servir les donn√©es de vols collect√©es sans Cloudflare</p>

        <div class="success">
            <strong>‚úì Serveur op√©rationnel</strong> - Les donn√©es sont servies directement depuis le cache FTP
        </div>

        <h2>üîå Endpoints</h2>

        <div class="endpoint">
            <h3>GET/POST /index.php</h3>
            <p>R√©cup√®re les donn√©es HTML brutes pour un a√©roport/date/heure sp√©cifique</p>
            
            <div class="param">
                <strong>iataAirport</strong> (requis) - Code IATA de l'a√©roport (3 lettres)<br>
                Exemple: <code>CDG</code>, <code>JFK</code>, <code>LHR</code>
            </div>
            
            <div class="param">
                <strong>depArr</strong> (optionnel) - Type de vol<br>
                Valeurs: <code>departure</code> (d√©faut), <code>arrival</code>
            </div>
            
            <div class="param">
                <strong>date</strong> (optionnel) - Date au format YYYY-MM-DD<br>
                D√©faut: date du jour
            </div>
            
            <div class="param">
                <strong>shift</strong> (optionnel) - Heure au format HH (00-23)<br>
                D√©faut: <code>00</code>
            </div>
        </div>

        <div class="endpoint">
            <h3>GET /list.php</h3>
            <p>Liste tous les fichiers disponibles avec m√©tadonn√©es</p>
            
            <div class="param">
                <strong>airport</strong> (optionnel) - Filtrer par code IATA
            </div>
            
            <div class="param">
                <strong>date</strong> (optionnel) - Filtrer par date
            </div>
            
            <div class="param">
                <strong>depArr</strong> (optionnel) - Filtrer par type
            </div>
        </div>

        <h2>üìñ Exemples d'utilisation</h2>

        <h3>Python avec requests</h3>
        <div class="example">
<code>import requests

# R√©cup√©rer les donn√©es pour CDG
response = requests.post('https://votre-domaine.com/index.php', data={
    'iataAirport': 'CDG',
    'depArr': 'departure',
    'date': '2025-11-12',
    'shift': '14'
})

html_content = response.text
print(f"Status: {response.status_code}")
print(f"Data age: {response.headers.get('X-Data-Age-Minutes')} minutes")
</code>
        </div>

        <h3>curl</h3>
        <div class="example">
<code># R√©cup√©rer les donn√©es
curl -X POST https://votre-domaine.com/index.php \
  -d "iataAirport=JFK" \
  -d "depArr=departure" \
  -d "date=2025-11-12" \
  -d "shift=10"

# Lister les fichiers disponibles
curl https://votre-domaine.com/list.php?airport=CDG
</code>
        </div>

        <h3>JavaScript / Fetch API</h3>
        <div class="example">
<code>const formData = new FormData();
formData.append('iataAirport', 'LHR');
formData.append('depArr', 'departure');
formData.append('date', '2025-11-12');
formData.append('shift', '15');

fetch('https://votre-domaine.com/index.php', {
    method: 'POST',
    body: formData
})
.then(response => response.text())
.then(html => console.log(html));
</code>
        </div>

        <h2>üìã Headers de r√©ponse</h2>
        <ul>
            <li><code>X-Data-Age-Seconds</code> - √Çge des donn√©es en secondes</li>
            <li><code>X-Data-Age-Minutes</code> - √Çge des donn√©es en minutes</li>
            <li><code>X-Source-File</code> - Nom du fichier source</li>
            <li><code>X-File-Modified</code> - Date de modification du fichier</li>
        </ul>

        <h2>‚ö†Ô∏è Codes de statut HTTP</h2>
        <ul>
            <li><strong>200 OK</strong> - Donn√©es trouv√©es et servies</li>
            <li><strong>400 Bad Request</strong> - Param√®tres invalides</li>
            <li><strong>404 Not Found</strong> - Aucune donn√©e disponible pour cette requ√™te</li>
            <li><strong>410 Gone</strong> - Donn√©es trop anciennes (> 24h)</li>
        </ul>

        <div class="note">
            <strong>Note:</strong> Les fichiers HTML sont automatiquement upload√©s par le collecteur Python.
            Le serveur sert toujours la version la plus r√©cente disponible.
        </div>

        <h2>üîß Installation sur le serveur FTP</h2>
        <ol style="margin-left: 20px; margin-top: 10px;">
            <li>Uploader <code>index.php</code> et <code>list.php</code> √† la racine du r√©pertoire FTP</li>
            <li>Cr√©er un dossier <code>data/</code> au m√™me niveau</li>
            <li>Configurer le collecteur Python pour uploader vers <code>data/</code></li>
            <li>Tester avec: <code>https://votre-domaine.com/list.php</code></li>
        </ol>

        <h2>üîó Liens utiles</h2>
        <ul>
            <li><a href="list.php">üìÇ Liste des fichiers disponibles (JSON)</a></li>
            <li><a href="?iataAirport=CDG&depArr=departure">üß™ Test avec CDG</a></li>
        </ul>

        <hr style="margin: 30px 0; border: none; border-top: 1px solid #ddd;">
        <p style="text-align: center; color: #7f8c8d; font-size: 0.9em;">
            Airportinfo Data Server v1.0 | Data Science Test Project
        </p>
    </div>
</body>
</html>
